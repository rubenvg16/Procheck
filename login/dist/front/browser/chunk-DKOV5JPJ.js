import{a as S}from"./chunk-DNMFUVI3.js";import{a as T,b as v,c as E,d as F,e as I,f as N,g as q,h as A,i as L}from"./chunk-2TDRPH33.js";import"./chunk-2RZQ7SSK.js";import"./chunk-A6SJ6WFE.js";import{B as b,F as p,H as s,I as c,J as n,K as i,L as l,N as u,O as _,P as m,Q as w,T as P,Y as C,Z as x,_ as M,ea as y,ga as O,ha as k,ka as R,m as g,x as h,y as o}from"./chunk-OKQLCJWR.js";import"./chunk-2NFLSA4Y.js";var U=(e,r)=>({"is-valid":e,"is-invalid":r});function z(e,r){e&1&&l(0,"div",30)}function j(e,r){e&1&&l(0,"img",31)}function D(e,r){e&1&&l(0,"div",30)}function G(e,r){e&1&&l(0,"img",31)}function Y(e,r){e&1&&l(0,"div",30)}function Z(e,r){e&1&&l(0,"img",31)}function H(e,r){e&1&&l(0,"div",30)}function J(e,r){e&1&&l(0,"img",31)}function K(e,r){if(e&1&&(n(0,"div",32),m(1),i()),e&2){let a=_();o(),w(a.message)}}function Q(e,r){if(e&1&&(n(0,"div",33),m(1),i()),e&2){let a=_();o(),w(a.error)}}var V=class e{_authService=g(S);_formBuilder=g(A);_route=g(y);_router=g(O);form=this._formBuilder.group({password:["",[v.required,this.passwordValidator()]],repeatPassword:["",v.required]});message="";error="";passwordFocused=!1;showPassword=!1;showRepeatPassword=!1;get np(){return this._route.snapshot.queryParamMap.get("np")||""}passwordValidator(){return r=>{let a=r.value;if(!a)return{required:!0};let t=/[A-Z]/.test(a),d=/[a-z]/.test(a),f=/[0-9]/.test(a),B=a.length>=8;return t&&d&&f&&B?null:{invalidPassword:!0}}}get hasUppercase(){return/[A-Z]/.test(this.form.get("password")?.value||"")}get hasLowercase(){return/[a-z]/.test(this.form.get("password")?.value||"")}get hasNumber(){return/[0-9]/.test(this.form.get("password")?.value||"")}get hasMinLength(){return(this.form.get("password")?.value||"").length>=8}get passwordsMatch(){let r=this.form.get("password")?.value,a=this.form.get("repeatPassword")?.value;return!r||!a?!1:r===a}get passwordType(){return this.showPassword?"text":"password"}get repeatPasswordType(){return this.showRepeatPassword?"text":"password"}get passwordEyeIcon(){return this.showPassword?"assets/img/hide.svg":"assets/img/show.svg"}get repeatPasswordEyeIcon(){return this.showRepeatPassword?"assets/img/hide.svg":"assets/img/show.svg"}submit(){if(this.form.invalid||this.form.value.password!==this.form.value.repeatPassword){this.form.markAllAsTouched(),this.error="Las contrase\xF1as no coinciden o no cumplen los requisitos.";return}this._authService.resetPassword(this.np,this.form.value.password).subscribe({next:()=>{this.message="Contrase\xF1a cambiada con \xE9xito. Puedes iniciar sesi\xF3n.",this.error="",setTimeout(()=>this._router.navigateByUrl("/auth/log-in"),2e3)},error:r=>{this.error=r.error?.message||"Error al cambiar la contrase\xF1a.",this.message=""}})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=b({type:e,selectors:[["app-reset-password"]],decls:52,vars:29,consts:[[1,"position-relative","min-vh-100","d-flex","justify-content-center","align-items-center"],[1,"card","shadow","border-0",2,"border-radius","20px","width","auto","max-width","700px"],[1,"row","g-0","align-items-center"],[1,"col-auto","text-center","px-5","py-5"],[1,"bartolome-logo-animated"],["src","/assets/img/logo.png","alt","Logo Bartolome",1,"logo-img"],[1,"col","px-5","py-5"],[1,"fw-bold","mb-4","text-center",2,"font-size","1.6rem"],[3,"ngSubmit","formGroup"],[1,"mb-3","position-relative"],["for","password"],["id","password","formControlName","password","placeholder","********",1,"form-control","border-bottom-only",3,"focus","blur","input","type"],["type","button","tabindex","-1",1,"btn-eye",3,"click"],["alt","Mostrar/Ocultar",3,"src"],[1,"password-requirements"],[1,"requirement",2,"--index","0"],["class","bullet",4,"ngIf"],["src","assets/img/success.svg",4,"ngIf"],[1,"requirement",2,"--index","1"],[1,"requirement",2,"--index","2"],[1,"requirement",2,"--index","3"],["for","repeatPassword"],["id","repeatPassword","formControlName","repeatPassword","placeholder","********",1,"form-control","border-bottom-only",3,"type","ngClass"],["type","submit",1,"btn","btn-primary","w-100","mb-3","btn-pill"],["class","alert alert-success mt-2",4,"ngIf"],["class","alert alert-danger mt-2",4,"ngIf"],["routerLink","/auth/log-in",1,"btn","btn-link","d-flex","justify-content-center","volverBTN","btn-pill"],[1,"fondo-olas"],[1,"imagenFondo","imagenFondo-secundaria"],[1,"imagenFondo"],[1,"bullet"],["src","assets/img/success.svg"],[1,"alert","alert-success","mt-2"],[1,"alert","alert-danger","mt-2"]],template:function(a,t){if(a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l(5,"img",5),i()(),n(6,"div",6)(7,"h2",7),m(8," Nueva contrase\xF1a "),i(),n(9,"form",8),u("ngSubmit",function(){return t.submit()}),n(10,"div",9)(11,"label",10),m(12,"Contrase\xF1a"),i(),n(13,"input",11),u("focus",function(){return t.passwordFocused=!0})("blur",function(){return t.passwordFocused=!1})("input",function(){let f;return(f=t.form.get("repeatPassword"))==null?null:f.updateValueAndValidity()}),i(),n(14,"button",12),u("click",function(){return t.showPassword=!t.showPassword}),l(15,"img",13),i()(),n(16,"div",14)(17,"div",15),p(18,z,1,0,"div",16)(19,j,1,0,"img",17),n(20,"span"),m(21,"May\xFAscula"),i()(),n(22,"div",18),p(23,D,1,0,"div",16)(24,G,1,0,"img",17),n(25,"span"),m(26,"Min\xFAscula"),i()(),n(27,"div",19),p(28,Y,1,0,"div",16)(29,Z,1,0,"img",17),n(30,"span"),m(31,"N\xFAmero"),i()(),n(32,"div",20),p(33,H,1,0,"div",16)(34,J,1,0,"img",17),n(35,"span"),m(36,"Al menos 8 caracteres"),i()()(),n(37,"div",9)(38,"label",21),m(39,"Repetir contrase\xF1a"),i(),l(40,"input",22),n(41,"button",12),u("click",function(){return t.showRepeatPassword=!t.showRepeatPassword}),l(42,"img",13),i()(),n(43,"button",23),m(44,"Cambiar contrase\xF1a"),i()(),p(45,K,2,1,"div",24)(46,Q,2,1,"div",25),n(47,"a",26),m(48,"Volver"),i()()()(),n(49,"div",27),l(50,"div",28)(51,"div",29),i()()),a&2){let d;o(9),s("formGroup",t.form),o(4),s("type",t.passwordType),o(2),s("src",t.passwordEyeIcon,h),o(),c("visible",t.passwordFocused),o(),c("satisfied",t.hasUppercase),o(),s("ngIf",!t.hasUppercase),o(),s("ngIf",t.hasUppercase),o(3),c("satisfied",t.hasLowercase),o(),s("ngIf",!t.hasLowercase),o(),s("ngIf",t.hasLowercase),o(3),c("satisfied",t.hasNumber),o(),s("ngIf",!t.hasNumber),o(),s("ngIf",t.hasNumber),o(3),c("satisfied",t.hasMinLength),o(),s("ngIf",!t.hasMinLength),o(),s("ngIf",t.hasMinLength),o(6),s("type",t.repeatPasswordType)("ngClass",P(26,U,((d=t.form.get("repeatPassword"))==null?null:d.touched)&&t.passwordsMatch,((d=t.form.get("repeatPassword"))==null?null:d.touched)&&!t.passwordsMatch)),o(2),s("src",t.repeatPasswordEyeIcon,h),o(3),s("ngIf",t.message),o(),s("ngIf",t.error)}},dependencies:[M,C,x,L,I,T,E,F,N,q,R,k],styles:[".is-valid[_ngcontent-%COMP%]{border-bottom-color:#28a745!important}.volverBTN[_ngcontent-%COMP%]{text-decoration:none;border:1px solid #00adef!important;color:#000!important;background-color:transparent!important;transition:color .3s ease,background-color .2s ease,border-color .2s}.volverBTN[_ngcontent-%COMP%]:hover{color:#efefef!important;background-color:#000!important;border:1px solid black!important}@media (max-width: 575px){.card[_ngcontent-%COMP%]{max-width:100vw!important;width:100vw!important;border-radius:0!important;padding-left:0!important;padding-right:0!important}.card[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}.card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column!important}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;max-width:100px!important;width:100%}.col-auto[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{display:flex!important;flex-direction:column}}@media (max-width: 768px){html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow:hidden!important;height:100vh!important;touch-action:none}.card[_ngcontent-%COMP%]{box-shadow:none!important}.col-auto.text-center.px-5.py-5[_ngcontent-%COMP%]{padding:.3rem .5rem!important;text-align:center!important}.bartolome-logo-animated[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .bartolome-svg[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.fondo-olas[_ngcontent-%COMP%]{display:none!important}.logo-img[_ngcontent-%COMP%]{max-width:140px!important;width:100%!important;height:auto!important}}@media (max-width: 480px){html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow:hidden!important;height:100vh!important;touch-action:none}.card[_ngcontent-%COMP%]{box-shadow:none!important}.col-auto.text-center.px-5.py-5[_ngcontent-%COMP%]{padding:.15rem .2rem!important;text-align:center!important}.bartolome-logo-animated[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .bartolome-svg[_ngcontent-%COMP%]{width:70px!important;height:70px!important}.fondo-olas[_ngcontent-%COMP%]{display:none!important}.logo-img[_ngcontent-%COMP%]{max-width:100px!important;width:100%!important;height:auto!important}}.bartolome-logo-animated[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.bartolome-svg[_ngcontent-%COMP%]{opacity:0;transform:scale(.8);animation:_ngcontent-%COMP%_logo-appear 1.2s cubic-bezier(.23,1,.32,1) forwards}@keyframes _ngcontent-%COMP%_logo-appear{to{opacity:1;transform:scale(1)}}.bartolome-path[_ngcontent-%COMP%]{stroke:#000;stroke-width:8;fill:transparent;stroke-dasharray:14534.7;stroke-dashoffset:14534.7;animation:_ngcontent-%COMP%_logo-draw 2.2s ease forwards,_ngcontent-%COMP%_logo-fill 1.2s ease forwards 2.2s}@keyframes _ngcontent-%COMP%_logo-draw{0%{stroke-dashoffset:14534.7;fill:transparent}to{stroke-dashoffset:0;fill:transparent}}@keyframes _ngcontent-%COMP%_logo-fill{0%{fill:transparent}to{fill:#000}}.btn-pill[_ngcontent-%COMP%]{border-radius:50px;background-color:#00adef;color:#fff;border:2px solid transparent;transition:background-color .35s,border-color .2s,color .2s}.btn-pill[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.btn-pill[_ngcontent-%COMP%]:active{background-color:#333;border-color:gray;color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#00adef!important;color:#fff!important;border:2px solid transparent;transition:background-color .35s,border-color .2s,color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#000!important;color:#fff!important}.btn-primary[_ngcontent-%COMP%]:active, .volverBTN[_ngcontent-%COMP%]:active{background-color:#333!important;border-color:gray!important;color:#fff!important}.form-control[_ngcontent-%COMP%]{border:0;border-bottom:2px solid #ccc;border-radius:0;transition:border-bottom-color .7s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border-bottom-color:#0fb5e4}label[_ngcontent-%COMP%]{font-family:Montserrat-Bold,sans-serif}.is-invalid[_ngcontent-%COMP%]{border-bottom-color:red!important}.password-requirements[_ngcontent-%COMP%]{margin-top:8px;padding:10px;overflow:hidden;max-height:0;opacity:0;transition:max-height .3s ease-in-out,opacity .3s ease-in-out,margin-top .3s ease-in-out}.password-requirements.visible[_ngcontent-%COMP%]{max-height:150px;opacity:1}.requirement[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;transform:translateY(10px);opacity:0;transition:transform .3s ease,opacity .3s ease;transition-delay:calc(var(--index) * .05s)}.password-requirements.visible[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}.bullet[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#aaa;margin-right:8px}.requirement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;margin-right:8px}.requirement.satisfied[_ngcontent-%COMP%]{color:#28a745}.btn-eye[_ngcontent-%COMP%]{position:absolute;top:32px;right:30px;background:none;border:none;padding:0;cursor:pointer;outline:none;z-index:2;height:24px;width:24px;display:flex;align-items:center;justify-content:center}.btn-eye[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.logo-img[_ngcontent-%COMP%]{max-width:150px;width:100%;height:auto;display:block}@media (max-width: 768px){.logo-img[_ngcontent-%COMP%]{max-width:140px!important;width:100%!important;height:auto!important}}@media (max-width: 480px){.logo-img[_ngcontent-%COMP%]{max-width:100px!important;width:100%!important;height:auto!important}}"]})};export{V as ResetPasswordComponent};
