<div class="position-relative min-vh-100 d-flex justify-content-center align-items-center">
  <!-- Card -->
  <div class="card shadow border-0" style="border-radius: 20px; width: auto; max-width: 700px;">
    <div class="row g-0 align-items-center">
      <!-- Logo Column -->
      <div class="col-auto text-center px-5 py-5">
        <div class="bartolome-logo-animated">
          <img src="/assets/img/Logo.png" alt="Logo Bartolome" class="logo-img">
        </div>
      </div>

      <!-- Form Column -->
      <div class="col px-5 py-5">
        <h2 class="fw-bold mb-4 text-center" style="font-size: 1.6rem;">
          Nueva contraseña
        </h2>
        <form [formGroup]="form" (ngSubmit)="submit()">
          <div class="mb-3 position-relative">
            <label for="password">Contraseña</label>
            <input id="password" [type]="passwordType" class="form-control border-bottom-only"
              formControlName="password" (focus)="passwordFocused = true" (blur)="passwordFocused = false"
              (input)="form.get('repeatPassword')?.updateValueAndValidity()" placeholder="********" />
            <button type="button" class="btn-eye" (click)="showPassword = !showPassword" tabindex="-1">
              <img [src]="passwordEyeIcon" alt="Mostrar/Ocultar" />
            </button>
          </div>
          <div class="password-requirements" [class.visible]="passwordFocused">
            <div class="requirement" [class.satisfied]="hasUppercase" style="--index: 0">
              <div class="bullet" *ngIf="!hasUppercase"></div>
              <img src="assets/img/success.svg" *ngIf="hasUppercase">
              <span>Mayúscula</span>
            </div>
            <div class="requirement" [class.satisfied]="hasLowercase" style="--index: 1">
              <div class="bullet" *ngIf="!hasLowercase"></div>
              <img src="assets/img/success.svg" *ngIf="hasLowercase">
              <span>Minúscula</span>
            </div>
            <div class="requirement" [class.satisfied]="hasNumber" style="--index: 2">
              <div class="bullet" *ngIf="!hasNumber"></div>
              <img src="assets/img/success.svg" *ngIf="hasNumber">
              <span>Número</span>
            </div>
            <div class="requirement" [class.satisfied]="hasMinLength" style="--index: 3">
              <div class="bullet" *ngIf="!hasMinLength"></div>
              <img src="assets/img/success.svg" *ngIf="hasMinLength">
              <span>Al menos 8 caracteres</span>
            </div>
          </div>
          <div class="mb-3 position-relative">
            <label for="repeatPassword">Repetir contraseña</label>
            <input id="repeatPassword" [type]="repeatPasswordType" class="form-control border-bottom-only"
              formControlName="repeatPassword" placeholder="********" [ngClass]="{
                'is-valid': form.get('repeatPassword')?.touched && passwordsMatch,
                'is-invalid': form.get('repeatPassword')?.touched && !passwordsMatch
              }" />
            <button type="button" class="btn-eye" (click)="showRepeatPassword = !showRepeatPassword" tabindex="-1">
              <img [src]="repeatPasswordEyeIcon" alt="Mostrar/Ocultar" />
            </button>
          </div>
          <button type="submit" class="btn btn-primary w-100 mb-3 btn-pill">Cambiar contraseña</button>
        </form>
        <div *ngIf="message" class="alert alert-success mt-2">{{ message }}</div>
        <div *ngIf="error" class="alert alert-danger mt-2">{{ error }}</div>
        <a routerLink="/auth/log-in" class="btn btn-link d-flex justify-content-center volverBTN btn-pill">Volver</a>
      </div>
    </div>
  </div>
  <!-- Fondo con olas -->
  <div class="fondo-olas">
    <div class="imagenFondo imagenFondo-secundaria"></div>
    <div class="imagenFondo"></div>
  </div>
</div>